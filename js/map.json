{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 600,
    "title": "Mobile site of optus in 2018", 
    "data": {
    "url": "https://raw.githubusercontent.com/Yihao0030/3179-AS2/refs/heads/main/data/mobile-sites.csv",
    "format":{"type": "csv"}
    },
    "params": [
    {
      "name": "year_selection",
      "bind": {
        "input": "select",
        "options": [2018, 2019, 2020, 2021, 2022],
        "labels": ["2018", "2019", "2020", "2021", "2022"],
        "name": "Year Selection"
      }
    },
    {
        "name": "MNO_selection",
        "bind": {
            "input": "select",
            "options": ["Optus", "Telstra", "TPG"],
            "labels": ["Optus", "Telstra", "TPG"],
            "name": "MNO Selection"
        }
    }
  ],
  "transform": [
    {
        "filter": "year_selection == null || datum.Year == year_selection"
    },
    {
        "filter": "MNO_selection == null || datum.MNO == MNO_selection"
    }
  ],
    "layer":[
        {
            "data": {
                "url": "https://raw.githubusercontent.com/Yihao0030/3179-hmwk9/refs/heads/main/data/SA4_2016_AUST.json",
                "format": {"type": "topojson", "feature": "SA4_2016_AUST"}
            },
            "mark": {
                "type": "geoshape",
                "stroke": "black",
                "color":"white",
                "strokeWidth": 0.5
            }
        },
        {
           
            "mark": "circle",
            "encoding": {
                "longitude": {
                    "field": "Longitude",
                    "type": "quantitative"
                },
                "latitude": {
                    "field": "Latitude",
                    "type": "quantitative"
                },
                "size": {"value": 10},
                "color": {
                    "field": "MNO",
                    "type": "nominal",
                    "scale": {
                        "domain": ["Optus", "Telstra", "TPG"],
                        "range": ["red", "blue", "green"]},
                    "legend": {"title": "MNO"}
                    },
                "tooltip":[
                    {"field": "Year", "type": "nominal"},
                    {"field": "MNO", "type": "nominal"},
                    {"field": "Latitude", "type": "quantitative"},
                    {"field": "Longitude", "type": "quantitative"},
                    {"field": "UMTS900", "type": "nominal"},
                    {"field":"UMTS2100", "type": "nominal"},
                    {"field":"LTE700", "type": "nominal"},
                    {"field":"LTE900", "type": "nominal"},
                    {"field":"LTE1800", "type": "nominal"},
                    {"field":"LTE2300", "type": "nominal"},
                    {"field":"LTE2600", "type": "nominal"},
                    {"field":"RFNSA ID", "type": "nominal"},
                    {"field":"Co_funded", "type": "nominal"},
                    {"field":"Co_contribution_program", "type": "nominal"}
              ]
            }
            
            
        }
    ]
    
}
